(function () {

    function SimpleModal(root, options) {
        if (typeof root === 'undefined' || root === null) {
            this.root = document.createElement('div');
            this.root.className = 'sm-hidden sm-modal-overlay';
            this.root.innerHTML = '<div class="sm-modal"><span class="sm-close-btn">&times;</span><div class="sm-modal-titlebar"></div><div class="sm-modal-body"></div><div class="sm-modal-footer"></div></div>';
        }

        //Establish elements...
        this.modalEl = this.root.querySelector('.sm-modal');
        this.bodyEl = this.root.querySelector('.sm-modal-body');
        this.titleEl = this.root.querySelector('.sm-modal-titlebar');
        this.footerEl = this.root.querySelector('.sm-modal-footer');
        this.closeBtn = this.root.querySelector('.sm-close-btn');

        this.isAttached = false;
        this.options = {
            maxWidth: 500,
            zIndex: 1000
        };

        if (typeof options !== 'undefined') {
            this.options = Object.assign(this.options, options);
        }

        this.init();
    }

    SimpleModal.prototype.setTitle = function (htmlStr) {
        this.titleEl.innerHTML = htmlStr;
    };

    SimpleModal.prototype.setBody = function (htmlStr) {
        this.bodyEl.innerHTML = htmlStr;
    };

    SimpleModal.prototype.attachToDocument = function () {
        if (!this.isAttached) {
            document.body.appendChild(this.root);
        }
    };

    SimpleModal.prototype.show = function () {
        this.root.classList.remove('sm-hidden');
    };

    SimpleModal.prototype.hide = function () {
        this.root.classList.add('sm-hidden');
    };

    SimpleModal.prototype.init = function () {
        var self = this;

        this.modalEl.style.maxWidth = this.options.maxWidth + 'px';
        this.root.style.zIndex = this.options.zIndex;

        this.closeBtn.addEventListener('click', function (evt) {
            self.hide();
        });

        this.attachToDocument();
    };

    //Some getters in case you need to set listeners for input...
    SimpleModal.prototype.getBodyElement = function () {
        return this.bodyEl;
    };

    //Export to the world...
    window.SimpleModal = SimpleModal;

})();